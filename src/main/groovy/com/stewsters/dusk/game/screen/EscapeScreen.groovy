package com.stewsters.dusk.game.screen

import com.stewsters.dusk.game.RenderConfig
import squidpony.squidgrid.gui.swing.SwingPane

import java.awt.event.KeyEvent

import static java.awt.event.KeyEvent.VK_ESCAPE
import static java.awt.event.KeyEvent.VK_L
import static java.awt.event.KeyEvent.VK_UNDEFINED
import static java.awt.event.KeyEvent.VK_X

class EscapeScreen implements Screen {


    PlayingScreen playingScreen

    EscapeScreen(PlayingScreen playingScreen) {
        this.playingScreen = playingScreen
    }

    @Override
    void displayOutput(SwingPane display) {

        rightJustifiedText(display, 5, "[L]evel Up")
        rightJustifiedText(display, 15, "[Escape] to continue")
        rightJustifiedText(display, 25, "[x] Exit to main menu")
        rightJustifiedText(display, 35, "Yeah, there is no saving.  Sorry.")


    }


    static void rightJustifiedText(SwingPane display, int y, String txt) {
        int startX = RenderConfig.screenWidth - txt.length() - 1
        display.placeHorizontalString(startX, y, txt)
    }

    @Override
    Screen respondToUserInput(KeyEvent key) {
        int code = key.getExtendedKeyCode()

        // if ExtendedKeyCode is VK_UNDEFINED (0) use normal keycode
        if (code == VK_UNDEFINED) {
            code = key.getKeyCode()
        }
        if (code == VK_X) {
            return new MainMenu()
        } else if (code == VK_ESCAPE) {
            return playingScreen
        } else if (code == VK_L) {
            return new LevelUpScreen(playingScreen)
        }

        return this
    }
}
